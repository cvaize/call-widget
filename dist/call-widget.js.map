{"version":3,"sources":["webpack://@cvaize/call-widget/webpack/runtime/chunk loaded","webpack://@cvaize/call-widget/./src/call-widget.js","webpack://@cvaize/call-widget/./src/call-widget.lib.js","webpack://@cvaize/call-widget/webpack/bootstrap","webpack://@cvaize/call-widget/webpack/runtime/define property getters","webpack://@cvaize/call-widget/webpack/runtime/hasOwnProperty shorthand","webpack://@cvaize/call-widget/webpack/runtime/make namespace object","webpack://@cvaize/call-widget/webpack/runtime/jsonp chunk loading","webpack://@cvaize/call-widget/webpack/startup"],"names":["deferred","defaultSettings","id","selector","startedTime","EVENT_BTN_PRIMARY_CLICK","EVENT_BTN_DANGER_CLICK","EVENT_BTN_REDIRECT_CLICK","makeCallWidget","theme","settings","Math","round","random","_settings","Object","assign","_entities","widget","primaryBtnId","dangerBtnId","title","wrapperId","content","tel","info","timeId","time","redirect","selectShowBtnId","selectCloseBtnId","selectWrapperId","selectId","numbers","photo","sizerId","src","_schedule","_eventHandlers","th","ScheduleItem","action","render","_handleEvent","name","value","handlers","result","i","length","handler","result_","_handleClickPrimaryBtn","answerCall","_handleClickDangerBtn","hangUpCall","_handleRedirect","select","document","getElementById","_handleClickShowRedirectBtn","push","_render","_handleClickHideRedirectBtn","_attachEvents","primaryBtn","dangerBtn","addEventListener","showRedirectBtn","closeRedirectBtn","redirectBtn","onload","_detachEvents","removeEventListener","undefined","item","shift","requestAnimationFrame","setTimeout","call","Error","setTime","setRedirectNumbers","print","element","String","querySelector","template","getTemplate","appendChild","destroy","Element","prototype","remove","parentNode","removeChild","on","fun","off","filter","fun_","window","CallWidget","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","key","splice","d","definition","o","defineProperty","enumerable","get","obj","prop","hasOwnProperty","r","Symbol","toStringTag","installedChunks","867","204","17","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"mappings":"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","file":"/call-widget.js","sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","const defaultSettings = {\n    id: null,\n    selector: 'body',\n    startedTime: '00:00:00',\n}\n\nexport const EVENT_BTN_PRIMARY_CLICK = 'btn_primary:click'\nexport const EVENT_BTN_DANGER_CLICK = 'btn_danger:click'\nexport const EVENT_BTN_REDIRECT_CLICK = 'btn_redirect:click'\n\nexport const makeCallWidget = function (theme, settings = {}) {\n    if (!settings.id) settings.id = 'call-widget-' + Math.round(Math.random() * 10e6)\n\n    /**\n     * @private {{}} - Настройки\n     */\n    const _settings = Object.assign(defaultSettings, settings)\n    /**\n     * @public {String} - Главный id компонента\n     */\n    const id = _settings.id\n    /**\n     * @private {{}} - Параметры сущностей имеющихся в CallWidget\n     */\n    let _entities = {\n        widget: {id, primaryBtnId: id + '-primary-btn', dangerBtnId: id + '-danger-btn'},\n        title: {id: id + '-title', wrapperId: id + '-wrapper-title', content: null},\n        tel: {id: id + '-tel', wrapperId: id + '-wrapper-tel', content: null},\n        info: {\n            id: id + '-info',\n            timeId: id + '-time',\n            time: _settings.startedTime,\n        },\n        redirect: {\n            selectShowBtnId: id + '-redirect-select-show-btn',\n            selectCloseBtnId: id + '-redirect-select-close-btn',\n            selectWrapperId: id + '-redirect-select-wrapper',\n            selectId: id + '-redirect-select',\n            id: id + '-redirect-btn',\n            wrapperId: id + '-redirect-wrapper',\n            numbers: []\n        },\n        photo: {\n            id: id + '-photo',\n            wrapperId: id + '-wrapper-photo',\n            sizerId: id + '-sizer-photo',\n            src: ''\n        }\n    }\n    /**\n     * @private {[{}]} - Очередь для управления отрисовкой, массив объектов\n     */\n    let _schedule = []\n    /**\n     * @private {{}} - объект со слушателями, добавляются через функцию CallWidget.on() и удаляются через CallWidget.off()\n     */\n    let _eventHandlers = {\n        [EVENT_BTN_PRIMARY_CLICK]: [],\n        [EVENT_BTN_DANGER_CLICK]: [],\n        [EVENT_BTN_REDIRECT_CLICK]: [],\n    }\n\n    /**\n     * @public {{}}\n     */\n    const th = {_settings, _schedule, _entities}\n\n    const ScheduleItem = function (action, time) {\n        return {\n            time,\n            render() {\n                theme[action](th, time);\n            }\n        }\n    }\n    /**\n     * ---------------------- Приватные функции ----------------------\n     */\n\n    const _handleEvent = function (name, value) {\n        const handlers = _eventHandlers[name]\n        // result - нужен чтобы сказать что дальнейшие действия виджета нужно остановить\n        let result = true\n        for (let i = 0; i < handlers.length; i++) {\n            const handler = handlers[i]\n            if (handler) {\n                let result_ = handler(value, result)\n                if (typeof result_ === \"boolean\") {\n                    result = result_\n                }\n            }\n        }\n        return result\n    }\n\n    /**\n     * Метод, который сработает при клике по кнопке принять звонок\n     * @private\n     */\n    const _handleClickPrimaryBtn = function () {\n        const result = _handleEvent(EVENT_BTN_PRIMARY_CLICK)\n        if (result) {\n            answerCall()\n        }\n    }\n\n    /**\n     * Метод, который сработает при клике по кнопке положить звонок\n     * @private\n     */\n    const _handleClickDangerBtn = function () {\n        const result = _handleEvent(EVENT_BTN_DANGER_CLICK)\n        if (result) {\n            hangUpCall()\n        }\n    }\n\n    /**\n     * Метод, который сработает при клике на кнопке перевести звонок на выбранного оператора\n     * @private\n     */\n    const _handleRedirect = function () {\n        let select = document.getElementById(_entities.redirect.selectId)\n        _handleEvent(EVENT_BTN_REDIRECT_CLICK, select.value)\n    }\n\n    const _handleClickShowRedirectBtn = function () {\n        _schedule.push(ScheduleItem('showRedirect', 0))\n        _render()\n    }\n\n    const _handleClickHideRedirectBtn = function () {\n        _schedule.push(ScheduleItem('hideRedirect', 0))\n        _render()\n    }\n\n    const _attachEvents = function () {\n        let primaryBtn = document.getElementById(_entities.widget.primaryBtnId)\n        let dangerBtn = document.getElementById(_entities.widget.dangerBtnId)\n\n        primaryBtn.addEventListener('click', _handleClickPrimaryBtn)\n        dangerBtn.addEventListener('click', _handleClickDangerBtn)\n\n        //\n\n        let showRedirectBtn = document.getElementById(_entities.redirect.selectShowBtnId)\n        let closeRedirectBtn = document.getElementById(_entities.redirect.selectCloseBtnId)\n        let redirectBtn = document.getElementById(_entities.redirect.id)\n\n        showRedirectBtn.addEventListener('click', _handleClickShowRedirectBtn)\n        closeRedirectBtn.addEventListener('click', _handleClickHideRedirectBtn)\n        redirectBtn.addEventListener('click', _handleRedirect)\n\n        //\n\n        let photo = document.getElementById(_entities.photo.id)\n\n        photo.onload = function () {\n            _schedule.push(ScheduleItem('loadedPhoto', 300))\n            _render()\n        }\n    }\n\n    const _detachEvents = function () {\n        let primaryBtn = document.getElementById(_entities.widget.primaryBtnId)\n        let dangerBtn = document.getElementById(_entities.widget.dangerBtnId)\n\n        primaryBtn.removeEventListener('click', _handleClickPrimaryBtn)\n        dangerBtn.removeEventListener('click', _handleClickDangerBtn)\n\n        //\n\n        let showRedirectBtn = document.getElementById(_entities.redirect.selectShowBtnId)\n        let closeRedirectBtn = document.getElementById(_entities.redirect.selectCloseBtnId)\n        let redirectBtn = document.getElementById(_entities.redirect.id)\n\n        showRedirectBtn.removeEventListener('click', _handleClickShowRedirectBtn)\n        closeRedirectBtn.removeEventListener('click', _handleClickHideRedirectBtn)\n        redirectBtn.removeEventListener('click', _handleRedirect)\n\n        //\n\n        let photo = document.getElementById(_entities.photo.id)\n\n        photo.onload = undefined\n    }\n\n    /**\n     * Функция проходит по очереди и исполняет действия рекурсивно, пока в очереди не останется пунктов\n     * @private\n     */\n    const _render = function () {\n        let item = _schedule.shift()\n        if (item) {\n            if (item.time) {\n                requestAnimationFrame(() => {\n                    setTimeout(_render, item.time)\n                    item.render()\n                })\n            } else {\n                item.render()\n                _render()\n            }\n        }\n    }\n\n    /**\n     * ---------------------- Публичные функции ----------------------\n     */\n    /**\n     * Инициировать звонок: покажется виджет и даст возможность ответить на звонок\n     * @param {String} tel\n     * @param {String} title\n     * @param {String} photo\n     */\n    const call = function ({tel, title = null, photo = null}) {\n        if (!tel) {\n            throw new Error('CallWidget@call обязательно передайте номер телефона')\n        }\n\n        /**\n         * Заполнение данными\n         */\n        _entities.tel.content = tel\n        _entities.title.content = title\n        _entities.photo.src = photo\n\n        /**\n         * Заполнение очереди отрисовки в зависимости от данных\n         */\n        _schedule.push(ScheduleItem('fillTel', 0))\n        _schedule.push(ScheduleItem('showWidget', 300))\n        if (title) {\n            _schedule.push(ScheduleItem('fillTitle', 0))\n            _schedule.push(ScheduleItem('showTitle', 300))\n        } else {\n            _schedule.push(ScheduleItem('hideTitle', 300))\n        }\n        if (photo) {\n            _schedule.push(ScheduleItem('fillPhoto', 0))\n            _schedule.push(ScheduleItem('showPhoto', 300))\n        } else {\n            _schedule.push(ScheduleItem('hidePhoto', 300))\n        }\n\n        /**\n         * Вызов функции рендера очереди\n         */\n        _render()\n    }\n\n    /**\n     * Ответить на звонок\n     */\n    const answerCall = function () {\n        // Нужно установить начальное время, чтобы показать его, а потом уже пользователь будет его устанавливать\n        _entities.info.time = _settings.startedTime\n\n        // Нужно заблокировать кнопку \"принять звонок\" и установить активный статус кнопке \"принять звонок\"\n        // Блокировка кнопок нужна, чтобы не работали события при повторных кликах\n        _schedule.push(ScheduleItem('activePrimaryBtn', 0))\n        _schedule.push(ScheduleItem('fillInfo', 0))\n        _schedule.push(ScheduleItem('showInfo', 300))\n        _render()\n    }\n\n    /**\n     * Положить трубку\n     */\n    const hangUpCall = function () {\n        // Нужно заблокировать кнопки, свернуть все дополнительный поля и скрыть виджет\n        // Блокировка кнопок нужна, чтобы не работали события при повторных кликах\n        _schedule.push(ScheduleItem('activeDangerBtn', 0))\n        _schedule.push(ScheduleItem('hidePhoto', 300))\n        _schedule.push(ScheduleItem('hideInfo', 300))\n        _schedule.push(ScheduleItem('hideRedirect', 0))\n        _schedule.push(ScheduleItem('hideTitle', 300))\n        _schedule.push(ScheduleItem('hideWidget', 300))\n        _schedule.push(ScheduleItem('normalWidget', 0))\n        _render()\n    }\n\n    /**\n     * Установка времени, по умолчанию формат 00:00:00\n     */\n    const setTime = function (time) {\n        _entities.info.time = time\n        _schedule.push(ScheduleItem('fillInfo', 0))\n        _render()\n    }\n\n    /**\n     * Установка номеров телефонов для выбора редиректа\n     * @param {[String]} numbers\n     */\n    const setRedirectNumbers = function (numbers) {\n        _entities.redirect.numbers = numbers\n        _schedule.push(ScheduleItem('fillRedirect', 0))\n        _render()\n    }\n\n    /**\n     * Функция распечатывающая шаблон\n     * @param selector - Селектор или элемент\n     */\n    const print = function (selector = null) {\n        selector = selector || _settings.selector\n\n        let element\n        if (typeof selector === 'string' || selector instanceof String) {\n            element = document.querySelector(selector)\n        } else {\n            element = selector\n        }\n\n        let template = document.getElementById(_entities.widget.id)\n        if (!template) {\n            template = theme.getTemplate(_entities)\n\n            element.appendChild(template)\n\n            requestAnimationFrame(() => {\n                _attachEvents()\n            })\n        }\n\n        return template\n    }\n\n    /**\n     * Функция удаляющая шаблон\n     */\n    const destroy = function () {\n        _schedule = []\n\n        let element = document.getElementById(_entities.widget.id)\n\n        if (element) {\n            _detachEvents()\n\n            if (!('remove' in Element.prototype)) {\n                if (element.parentNode) {\n                    element.parentNode.removeChild(element);\n                }\n            } else {\n                element.remove();\n            }\n        }\n    }\n\n    const on = function (name, fun) {\n        _eventHandlers[name].push(fun)\n    }\n\n    const off = function (name, fun) {\n        _eventHandlers[name] = _eventHandlers[name].filter(fun_ => fun_ !== fun)\n    }\n\n    return {call, answerCall, hangUpCall, setTime, setRedirectNumbers, print, destroy, on, off}\n}\n","import * as CallWidget from './call-widget';\n\nwindow.CallWidget = CallWidget","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t867: 0,\n\t204: 0,\n\t17: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_cvaize_call_widget\"] = self[\"webpackChunk_cvaize_call_widget\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\n__webpack_require__.O(undefined, [204,17], function() { return __webpack_require__(842); })\n__webpack_require__.O(undefined, [204,17], function() { return __webpack_require__(695); })\nvar __webpack_exports__ = __webpack_require__.O(undefined, [204,17], function() { return __webpack_require__(906); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}