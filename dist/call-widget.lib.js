(()=>{"use strict";var t,e={510:(t,e,n)=>{n.d(e,{Z:()=>_});var i=n(653),r=n(620),o=n(722),l=n(997);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={id:null,selector:"body",startedTime:"00:00:00"},h={loading:!1,showing:!1,showed:!0,id:null},y="btn_primary:click",p="btn_danger:click",v=[y,p],_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t),f(this,"_settings",void 0),f(this,"_entities",void 0),f(this,"_schedule",void 0),f(this,"_funHandleClickPrimaryBtn",void 0),f(this,"_funHandleClickDangerBtn",void 0),f(this,"_eventHandlers",void 0),f(this,"EVENT_BTN_PRIMARY_CLICK",void 0),f(this,"EVENT_BTN_DANGER_CLICK",void 0),this.EVENT_BTN_PRIMARY_CLICK=y,this.EVENT_BTN_DANGER_CLICK=p,e.id||(e.id="call-widget-"+Math.round(1e7*Math.random())),this._settings=Object.assign(d,e),this._setStartParams()}var e,n,c;return e=t,(n=[{key:"call",value:function(t){var e=t.tel,n=t.title,l=void 0===n?null:n;if(!e)throw new Error("CallWidget@call обязательно передайте номер телефона");this._entities.tel.content=e,this._entities.title.content=l,this._schedule.push(new r.Z("fill",0,this)),this._schedule.push(new i.Z("show",300,this)),l&&(this._schedule.push(new o.Z("fill",0,this)),this._schedule.push(new o.Z("show",300,this))),this._render()}},{key:"answerCall",value:function(){this._entities.info.time=this._settings.startedTime,this._schedule.push(new i.Z("activePrimaryBtn",0,this)),this._schedule.push(new l.Z("fill",0,this)),this._schedule.push(new l.Z("show",150,this)),this._render()}},{key:"hangUpCall",value:function(){this._schedule.push(new i.Z("activeDangerBtn",0,this)),this._schedule.push(new l.Z("hide",150,this)),this._schedule.push(new o.Z("hide",300,this)),this._schedule.push(new i.Z("hide",300,this)),this._schedule.push(new i.Z("normal",0,this)),this._render()}},{key:"setTime",value:function(t){this._entities.info.time=t,this._schedule.push(new l.Z("fill",0,this)),this._render()}},{key:"print",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t="string"==typeof(n=n||this._settings.selector)||n instanceof String?document.querySelector(n):n;var i=this._getTemplate();return t.appendChild(i),requestAnimationFrame((function(){e._attachEvents()})),i}},{key:"on",value:function(t,e){this._eventHandlers[t].push(e)}},{key:"off",value:function(t,e){this._eventHandlers[t]=this._eventHandlers[t].filter((function(t){return t!==e}))}},{key:"_attachEvents",value:function(){var t=document.getElementById(this._entities.widget.primaryBtnId),e=document.getElementById(this._entities.widget.dangerBtnId),n=this;this._funHandleClickPrimaryBtn=function(){n._handleClickPrimaryBtn()},this._funHandleClickDangerBtn=function(){n._handleClickDangerBtn()},t.addEventListener("click",this._funHandleClickPrimaryBtn),e.addEventListener("click",this._funHandleClickDangerBtn)}},{key:"_handleEvent",value:function(t){for(var e=this._eventHandlers[t],n=!0,i=0;i<e.length;i++){var r=e[i];if(r){var o=r(n);"boolean"==typeof o&&(n=o)}}return n}},{key:"_handleClickPrimaryBtn",value:function(){this._handleEvent(y)&&this.answerCall()}},{key:"_handleClickDangerBtn",value:function(){this._handleEvent(p)&&this.hangUpCall()}},{key:"_render",value:function(){var t=this,e=this._schedule.shift();e&&(console.log(e,e.action,e.time),e.time?requestAnimationFrame((function(){setTimeout((function(){t._render()}),e.time),e.render()})):(e.render(),this._render()))}},{key:"_h",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=document.createElement(t);if(e)for(var r in e)i.setAttribute(r,e[r]);if(n)if("string"==typeof n||n instanceof String)i.textContent=n;else if(Array.isArray(n))for(var o=0;o<n.length;o++)i.appendChild(n[o]);return i}},{key:"_getTemplate",value:function(){var t=this._h;return t("div",{id:this._entities.widget.id,class:"call-widget"},[t("div",{id:this._entities.info.id,class:"call-widget__box-info"},[t("div",{class:"call-widget__redirect"}),t("div",{id:this._entities.info.timeId,class:"call-widget__time"})]),t("div",{id:this._entities.title.wrapperId,class:"call-widget__box-title"},[t("div",{id:this._entities.title.id,class:"call-widget__title"})]),t("div",{class:"call-widget__box-phone"},[t("div",{id:this._entities.tel.wrapperId,class:"call-widget__tel-wrapper"},[t("div",{id:this._entities.tel.id,class:"call-widget__tel"})]),t("button",{id:this._entities.widget.dangerBtnId,class:"call-widget__btn call-widget__btn-circle call-widget__btn-circle--danger",type:"button"}),t("button",{id:this._entities.widget.primaryBtnId,class:"call-widget__btn call-widget__btn-circle call-widget__btn-circle--primary",type:"button"})])])}},{key:"_setStartParams",value:function(){this._entities=this._getEntities(),this._schedule=[],this._eventHandlers={};for(var t=0;t<v.length;t++){var e=v[t];this._eventHandlers[e]=[]}}},{key:"_getEntities",value:function(){var t=this._settings.id;return{widget:s(s({},h),{},{id:t,primaryBtnId:t+"-primary-btn",dangerBtnId:t+"-danger-btn"}),title:s(s({},h),{},{id:t+"-title",wrapperId:t+"-wrapper-title",content:null}),tel:s(s({},h),{},{id:t+"-tel",wrapperId:t+"-wrapper-tel",content:null}),info:s(s({},h),{},{id:t+"-info",timeId:t+"-time",time:this._settings.startedTime})}}}])&&u(e.prototype,n),c&&u(e,c),t}()},623:(t,e,n)=>{var i=n(510);window.CallWidget=i.Z},184:(t,e,n)=>{function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:()=>o});var o=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"action",void 0),r(this,"time",void 0),r(this,"callWidget",void 0),this.action=e,this.time=n||0,this.callWidget=i}var e,n,o;return e=t,(n=[{key:"render",value:function(){throw new Error("ScheduleItem@render Обязательно определите метод рендера")}}])&&i(e.prototype,n),o&&i(e,o),t}()},997:(t,e,n)=>{function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=a(t);if(e){var r=a(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>u});var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(a,t);var e,n,i,s=c(a);function a(){return r(this,a),s.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){this["_"+this.action]()}},{key:"_fill",value:function(){document.getElementById(this.callWidget._entities.info.timeId).textContent=this.callWidget._entities.info.time}},{key:"_show",value:function(){var t=document.getElementById(this.callWidget._entities.info.id);t.style.transitionDuration=this.time+"ms",t.classList.add("show")}},{key:"_hide",value:function(){var t=document.getElementById(this.callWidget._entities.info.id);t.style.transitionDuration=this.time+"ms",t.classList.remove("show")}}])&&o(e.prototype,n),i&&o(e,i),a}(n(184).Z)},620:(t,e,n)=>{function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=a(t);if(e){var r=a(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>u});var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(a,t);var e,n,i,s=c(a);function a(){return r(this,a),s.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){this["_"+this.action]()}},{key:"_fill",value:function(){document.getElementById(this.callWidget._entities.tel.id).textContent=this.callWidget._entities.tel.content}}])&&o(e.prototype,n),i&&o(e,i),a}(n(184).Z)},722:(t,e,n)=>{function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=a(t);if(e){var r=a(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>u});var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(a,t);var e,n,i,s=c(a);function a(){return r(this,a),s.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){this["_"+this.action]()}},{key:"_fill",value:function(){document.getElementById(this.callWidget._entities.title.id).textContent=this.callWidget._entities.title.content}},{key:"_show",value:function(){var t=document.getElementById(this.callWidget._entities.title.wrapperId);t.style.transitionDuration=this.time+"ms",t.classList.add("show")}},{key:"_hide",value:function(){var t=document.getElementById(this.callWidget._entities.title.wrapperId);t.style.transitionDuration=this.time+"ms",t.classList.remove("show")}}])&&o(e.prototype,n),i&&o(e,i),a}(n(184).Z)},653:(t,e,n)=>{function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=a(t);if(e){var r=a(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>u});var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(a,t);var e,n,i,s=c(a);function a(){return r(this,a),s.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){this["_"+this.action]()}},{key:"_show",value:function(){var t=document.getElementById(this.callWidget._entities.widget.id);t.style.transitionDuration=this.time+"ms",t.classList.add("show")}},{key:"_hide",value:function(){var t=document.getElementById(this.callWidget._entities.widget.id);t.style.transitionDuration=this.time+"ms",t.classList.remove("show")}},{key:"_activePrimaryBtn",value:function(){var t=document.getElementById(this.callWidget._entities.widget.dangerBtnId),e=document.getElementById(this.callWidget._entities.widget.primaryBtnId);e.disabled=!0,t.disabled=!1,e.classList.add("active")}},{key:"_activeDangerBtn",value:function(){var t=document.getElementById(this.callWidget._entities.widget.primaryBtnId),e=document.getElementById(this.callWidget._entities.widget.dangerBtnId);t.disabled=!0,e.disabled=!0,t.classList.remove("active")}},{key:"_normal",value:function(){var t=document.getElementById(this.callWidget._entities.widget.primaryBtnId),e=document.getElementById(this.callWidget._entities.widget.dangerBtnId);t.disabled=!1,e.disabled=!1,t.classList.remove("active")}}])&&o(e.prototype,n),i&&o(e,i),a}(n(184).Z)},869:()=>{}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var o=n[t]={exports:{}};return e[t](o,o.exports,i),o.exports}i.m=e,t=[],i.O=(e,n,r,o)=>{if(!n){var l=1/0;for(a=0;a<t.length;a++){for(var[n,r,o]=t[a],c=!0,s=0;s<n.length;s++)(!1&o||l>=o)&&Object.keys(i.O).every((t=>i.O[t](n[s])))?n.splice(s--,1):(c=!1,o<l&&(l=o));c&&(t.splice(a--,1),e=r())}return e}o=o||0;for(var a=t.length;a>0&&t[a-1][2]>o;a--)t[a]=t[a-1];t[a]=[n,r,o]},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={165:0,867:0,836:0};i.O.j=e=>0===t[e];var e=(e,n)=>{var r,o,[l,c,s]=n,a=0;for(r in c)i.o(c,r)&&(i.m[r]=c[r]);if(s)var u=s(i);for(e&&e(n);a<l.length;a++)o=l[a],i.o(t,o)&&t[o]&&t[o][0](),t[l[a]]=0;return i.O(u)},n=self.webpackChunkcall_widget=self.webpackChunkcall_widget||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),i.O(void 0,[836],(()=>i(623)));var r=i.O(void 0,[836],(()=>i(869)));r=i.O(r)})();
//# sourceMappingURL=call-widget.lib.js.map